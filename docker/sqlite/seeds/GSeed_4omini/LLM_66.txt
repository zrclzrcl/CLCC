CREATE TABLE users(id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE, email TEXT NOT NULL);
CREATE TABLE posts(id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER, content TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY(user_id) REFERENCES users(id) ON DELETE CASCADE);
CREATE TRIGGER update_timestamp AFTER UPDATE ON posts FOR EACH ROW BEGIN UPDATE posts SET created_at = CURRENT_TIMESTAMP WHERE id = NEW.id; END;

INSERT INTO users(username, email) VALUES('alice', 'alice@example.com'), ('bob', 'bob@example.com');
INSERT INTO posts(user_id, content) VALUES(1, 'Hello, world!'), (1, 'This is a second post.'), (2, 'My first post.');

SELECT username, content FROM users JOIN posts ON users.id = posts.user_id WHERE username = 'alice';
UPDATE posts SET content = 'Updated content for the first post.' WHERE id = 1;
DELETE FROM posts WHERE id = 2;

PRAGMA foreign_keys = ON;
PRAGMA user_version = 1;