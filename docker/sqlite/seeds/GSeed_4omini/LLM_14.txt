CREATE TABLE users(id INTEGER PRIMARY KEY, username TEXT UNIQUE NOT NULL, email TEXT NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP);
INSERT INTO users (username, email) VALUES ('user1', 'user1@example.com');
INSERT INTO users (username, email) VALUES ('user2', 'user2@example.com');
CREATE TABLE posts(id INTEGER PRIMARY KEY, user_id INTEGER, content TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (user_id) REFERENCES users(id));
INSERT INTO posts (user_id, content) VALUES (1, 'Hello World');
INSERT INTO posts (user_id, content) VALUES (1, 'Another post by user1');
INSERT INTO posts (user_id, content) VALUES (2, 'First post by user2');
CREATE TABLE comments(id INTEGER PRIMARY KEY, post_id INTEGER, author_id INTEGER, content TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (post_id) REFERENCES posts(id), FOREIGN KEY (author_id) REFERENCES users(id));
INSERT INTO comments (post_id, author_id, content) VALUES (1, 1, 'Nice post!');
INSERT INTO comments (post_id, author_id, content) VALUES (2, 2, 'Interesting perspective');
CREATE INDEX idx_user_email ON users(email);
DELETE FROM comments WHERE id = 1;
UPDATE posts SET content = 'Updated content' WHERE id = 1;
SELECT u.username, p.content FROM users u JOIN posts p ON u.id = p.user_id WHERE p.created_at > DATETIME('now', '-1 day');