CREATE TABLE users(id INTEGER PRIMARY KEY, username TEXT UNIQUE NOT NULL, email TEXT NOT NULL);
INSERT INTO users (username, email) VALUES ('user1', 'user1@example.com');
INSERT INTO users (username, email) VALUES ('user2', 'user2@example.com');
CREATE TABLE posts(id INTEGER PRIMARY KEY, user_id INTEGER, content TEXT NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY(user_id) REFERENCES users(id));
INSERT INTO posts (user_id, content) VALUES (1, 'Hello, this is my first post!');
INSERT INTO posts (user_id, content) VALUES (1, 'Another post from user1');
INSERT INTO posts (user_id, content) VALUES (2, 'user2 shares a thought here');
CREATE VIEW user_posts AS SELECT u.username, p.content FROM users u JOIN posts p ON u.id = p.user_id;
CREATE VIEW recent_posts AS SELECT * FROM posts ORDER BY created_at DESC LIMIT 5;
SELECT * FROM user_posts WHERE username = 'user1';
SELECT * FROM recent_posts;
CREATE TABLE comments(id INTEGER PRIMARY KEY, post_id INTEGER, user_id INTEGER, comment TEXT, FOREIGN KEY(post_id) REFERENCES posts(id), FOREIGN KEY(user_id) REFERENCES users(id));
INSERT INTO comments (post_id, user_id, comment) VALUES (1, 1, 'Great post!');
INSERT INTO comments (post_id, user_id, comment) VALUES (1, 2, 'Interesting perspective.');
CREATE INDEX idx_user_email ON users(email);
CREATE INDEX idx_post_created_at ON posts(created_at);
SELECT u.username, COUNT(p.id) AS post_count FROM users u LEFT JOIN posts p ON u.id = p.user_id GROUP BY u.id;