CREATE TABLE users(id INTEGER PRIMARY KEY, username TEXT UNIQUE NOT NULL, email TEXT);
INSERT INTO users (username, email) VALUES ('user1', 'user1@example.com'), ('user2', 'user2@example.com'), ('user3', 'user3@example.com');
CREATE TABLE posts(id INTEGER PRIMARY KEY, user_id INTEGER, content TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY(user_id) REFERENCES users(id));
INSERT INTO posts (user_id, content) VALUES (1, 'Hello World'), (2, 'SQLite is great!'), (1, 'Fuzz testing'), (NULL, 'Invalid user ID');
CREATE TABLE comments(id INTEGER PRIMARY KEY, post_id INTEGER, user_id INTEGER, comment TEXT, FOREIGN KEY(post_id) REFERENCES posts(id), FOREIGN KEY(user_id) REFERENCES users(id));
INSERT INTO comments (post_id, user_id, comment) VALUES (1, 1, 'Nice post!'), (1, 2, 'I agree!'), (2, 1, 'Interesting perspective'), (NULL, NULL, 'Invalid references');
CREATE VIEW user_posts AS SELECT u.username, p.content FROM users u JOIN posts p ON u.id = p.user_id;
CREATE VIEW recent_comments AS SELECT c.comment, u.username FROM comments c JOIN users u ON c.user_id = u.id ORDER BY c.id DESC;
SELECT * FROM user_posts WHERE username = (SELECT username FROM users WHERE id = 1);
SELECT * FROM recent_comments WHERE comment LIKE '%great%' AND user_id = (SELECT id FROM users WHERE username = 'user2');
SELECT COUNT(*) FROM comments WHERE post_id IN (SELECT id FROM posts WHERE user_id IS NOT NULL);
SELECT DISTINCT content FROM posts WHERE created_at > (SELECT datetime('now', '-1 day'));