CREATE TABLE users(id INTEGER PRIMARY KEY, username TEXT NOT NULL UNIQUE, email TEXT NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP);
CREATE TABLE posts(id INTEGER PRIMARY KEY, user_id INTEGER, content TEXT, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY(user_id) REFERENCES users(id));
CREATE INDEX idx_username ON users(username);
CREATE INDEX idx_user_posts ON posts(user_id);
INSERT INTO users(username, email) VALUES('alice', 'alice@example.com');
INSERT INTO users(username, email) VALUES('bob', 'bob@example.com');
INSERT INTO posts(user_id, content) VALUES(1, 'Hello World!');
INSERT INTO posts(user_id, content) VALUES(1, 'Another update from Alice.');
INSERT INTO posts(user_id, content) VALUES(2, 'Bob posts for the first time!');
SELECT username, COUNT(posts.id) AS post_count FROM users LEFT JOIN posts ON users.id = posts.user_id GROUP BY users.id;
SELECT email FROM users WHERE username LIKE 'a%';
SELECT content FROM posts WHERE created_at > DATETIME('now', '-7 days') ORDER BY created_at DESC;
SELECT * FROM users WHERE id IN (SELECT user_id FROM posts WHERE content LIKE '%update%');