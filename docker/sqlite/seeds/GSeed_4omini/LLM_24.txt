CREATE TABLE users (
    id INTEGER PRIMARY KEY,
    username TEXT UNIQUE NOT NULL,
    email TEXT NOT NULL CHECK(email LIKE '%_@__%.__%'),
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE orders (
    order_id INTEGER PRIMARY KEY,
    user_id INTEGER NOT NULL,
    order_amount REAL CHECK(order_amount > 0),
    order_date DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);

INSERT INTO users (username, email) VALUES ('testuser1', 'test1@example.com');
INSERT INTO users (username, email) VALUES ('testuser2', 'test2@example.com');

INSERT INTO orders (user_id, order_amount) VALUES (1, 99.99);
INSERT INTO orders (user_id, order_amount) VALUES (1, 49.50);
INSERT INTO orders (user_id, order_amount) VALUES (2, 75.00);

UPDATE users SET email = 'updated@example.com' WHERE id = 1;

DELETE FROM orders WHERE order_id = 2;

SELECT * FROM users;
SELECT * FROM orders WHERE user_id = 1 ORDER BY order_date DESC;