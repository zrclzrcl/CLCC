CREATE TABLE users(id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT NOT NULL, email TEXT NOT NULL UNIQUE, created_at DATETIME DEFAULT CURRENT_TIMESTAMP);
CREATE TABLE posts(id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER, title TEXT NOT NULL, content TEXT NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY(user_id) REFERENCES users(id));
CREATE TRIGGER update_timestamp BEFORE UPDATE ON posts FOR EACH ROW BEGIN UPDATE posts SET created_at = CURRENT_TIMESTAMP WHERE id = OLD.id; END;
CREATE INDEX idx_username ON users(username);
CREATE VIRTUAL TABLE search_index USING fts5(title, content);