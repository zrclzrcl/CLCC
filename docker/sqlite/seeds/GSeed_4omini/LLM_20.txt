CREATE TABLE users(id INTEGER PRIMARY KEY, username TEXT UNIQUE, email TEXT NOT NULL);
CREATE TABLE posts(id INTEGER PRIMARY KEY, user_id INTEGER, content TEXT, created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY(user_id) REFERENCES users(id));
CREATE TABLE comments(id INTEGER PRIMARY KEY, post_id INTEGER, user_id INTEGER, content TEXT, FOREIGN KEY(post_id) REFERENCES posts(id), FOREIGN KEY(user_id) REFERENCES users(id));
CREATE UNIQUE INDEX idx_users_username ON users(username);
CREATE INDEX idx_posts_user_id ON posts(user_id);
INSERT INTO users(username, email) VALUES('user1', 'user1@example.com'), ('user2', 'user2@example.com');
INSERT INTO posts(user_id, content) VALUES(1, 'Post content for user1'), (2, 'Post content for user2');
INSERT INTO comments(post_id, user_id, content) VALUES(1, 1, 'Comment for post 1 by user 1'), (2, 2, 'Comment for post 2 by user 2');
SELECT * FROM users WHERE email LIKE '%@example.com';
SELECT p.content, COUNT(c.id) as comment_count FROM posts p LEFT JOIN comments c ON p.id = c.post_id GROUP BY p.id;
ALTER TABLE users ADD COLUMN last_logged_in TIMESTAMP;
DROP TABLE IF EXISTS temp_backup;
CREATE TABLE temp_backup AS SELECT * FROM users;